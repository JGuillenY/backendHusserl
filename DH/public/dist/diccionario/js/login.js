lang.loadPack("al"),lang.loadPack("en");const localStore=new storage;var setStore=(e,o)=>{var a={user:e,password:o,ultimasVisitadas:[],ultimaVisitada:"alfabeto"};localStore.setObjects("sesion",a),linkTo("main.html")},$$vistaIngreso=$("#ingreso").view({state:{},login:function(e){e.preventDefault();var o=this.data.password,a=JSON.stringify({userId:this.data.user,password:this.data.password});loginService("/login/usuario","POST",a,e=>{console.log(e),e.error?createAlert("Error: ",e.error):setStore(e.response,o)})},toggleLoginView:function(){$(".login-card").toggle()}}),$$vistaRegistro=$("#registro").view({state:{},signup:function(e){e.preventDefault();var o=this.data.comprobacion;console.log(o);var a={nombre:this.data.nombre,apellidos:this.data.apellidoS,email:this.data.email,institucion:this.data.institucion,grado:this.data.grado,pais:this.data.pais,password:this.data.password};if(console.log(a),a.password==o){loginService("/login/registrar","POST",JSON.stringify(a),e=>{if(e.response){var o="/login/sendRegistroEmail/"+localStore.getItem("lang");console.log(o),loginService(o,"GET",{nombre:a.nombre,email:a.email,pass:a.password},e=>{e.response?(alert("Su registro ha concluido con exito!"),setStore(a.email,a.password)):alert("Hubo un error al enviar el correo electrónico de notificación.")})}else alert("El correo que intentó registrar ya ha sido ocupado.")})}else createAlert("Error: ","El password no coincide con la comprobación.")},toggleLoginView:function(){$(".login-card").toggle()}});setTimeout(function(){$(".lang-icon").click(),$(".lang-icon").mouseover()},1e3),$("form input[type=text]").on("change invalid",function(){var e=$(this).get(0);e.validity.valid||e.setCustomValidity("Este campo es requerido.")});var restaurarPwd=e=>{e.preventDefault();var o=$("#exampleInputEmail").val();service="/login/recoverPassword/"+localStore.getItem("lang")+"?email="+o,$("#olvidoPasswordModal").modal("hide"),$("#loadingModal").modal("show"),loginService(service,"GET",{},e=>{e.response?($("#loading-content").html("<span>Se ha enviado una liga a su correo para reestablecer la contraseña.</span>"),setTimeout(function(){$("#loading-content").html('<img src="images/Facebook-1s-200px.svg" style="width:75px;"/><br/><span>Validando Correo Electrónico</span>'),$("#loadingModal").modal("hide")},3e3)):($("#loading-content").html("<span>Hubo un error con el servicio de correo, intente mas tarde.</span>"),setTimeout(function(){$("#loading-content").html('<img src="images/Facebook-1s-200px.svg" style="width:75px;"/><br/><span>Validando Correo Electrónico</span>'),$("#loadingModal").modal("hide")},3e3))})};localStore.setItem("lang","es"),localStore.getObjects("sesion")&&linkTo("main.html");